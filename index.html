<!DOCTYPE html>
<head>
    <title>mA Calculator</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ§ª</text></svg>">
    <style>
        .max-size {
            width: 100%;
            height: 100vh;
        }
        #mainBox {
            border-radius: 50px;
            background: #e0e0e0;
            box-shadow:  20px 20px 60px #bebebe, -20px -20px 60px #ffffff;
            padding: 1.5vw;
            width: fit-content;
            height: 29.21875vw;
            display: flex;
        }
        input,
        select {
            border: 2px solid transparent;
            padding: 0.5vw;
            border-radius: 50px;
        }
        #result,
        #ampPerGram {
            background:#f5f5f5;
            padding: 0.5vw;
            border-radius: 50px;
            width: 5em;
            text-align: center;
        }

        body {
            margin: 0;
            background-color: #e0e0e0;
        }
        body,
        input,
        button {
            font-family: "Courier New", Courier, monospace;
        }
        button,
        input {
            border: 2px solid transparent;
            padding: 0.5vw;
            border-radius: 100px;
        }
        button:focus,
        button:hover,
        input {
            outline: none;
        }
        input {
            background-color: #f5f5f5;
        }
        div,
        label {
            display: grid;
            place-items: center;
        }
        :focus {
            border: 2px solid lightgray;
        }
        button:active,
        input#submit:active {
            background-color: lightgray;
            border: 2px solid transparent;
        }
        #sub {
            display: flex;
            text-align: center;
            vertical-align: middle;
        }
        .sub {
            margin-left: 2vw;
        }
        .sub p {
            margin: 1.65625vw 0 1.15625vw 0;
        }
        .sub input {
            margin: 1vw 0 .5vw 0;
        }
    </style>
    <script>
        function calculate() {
            var mass = document.getElementById("mass").value;
            var anodeFoil = document.getElementById("anodeFoil").value;
            var cathodeFoil = document.getElementById("cathodeFoil").value;
            var ampPerGram = document.getElementById("ampPerGram").value;
            if (anodeFoil === "Al") {
                anodeFoil = 0.0106
            } else if (anodeFoil === "Cu") {
                anodeFoil = 0.0175
            }
            if (cathodeFoil === "Al") {
                cathodeFoil = 0.0106
            } else if (cathodeFoil === "Cu") {
                cathodeFoil = 0.0175
            }
            var active = mass - anodeFoil - cathodeFoil
            active = Math.round(active * 1000) / 1000
            var result = ampPerGram * active * 1000
            result = Math.round(result * 100) / 100
            document.getElementById("result").innerHTML = result;        
            if (result <= 0) {
                document.getElementById("result").innerHTML = "..."
            }
        }
        function cc() {
            var el = document.createElement('textarea');
            el.value = (document.getElementById("result").innerHTML)
            el.setAttribute('readonly', '');
            el.style = { position: 'absolute', left: '-9999px' };
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
        }
        function download(filename, text) {
            var element = document.createElement('a');
            element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
            element.setAttribute('download', filename);
            element.style.display = 'none';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }
        function csv() {
            var mass = document.getElementById("mass").value;
            var c1 = document.getElementById("1").value;
            var c2 = document.getElementById("2").value;
            var c3 = document.getElementById("3").value;
            var c4 = document.getElementById("4").value;
            var c5 = document.getElementById("5").value;
            var c6 = document.getElementById("6").value;
            var c7 = document.getElementById("7").value;
            var c8 = document.getElementById("8").value;
            var c9 = document.getElementById("9").value;
            var c10 = document.getElementById("10").value;
            var c15 = document.getElementById("15").value;
            var c20 = document.getElementById("20").value;
            var c30 = document.getElementById("30").value;
            var c50 = document.getElementById("50").value;
            var c100 = document.getElementById("100").value;
            const value = ["", "", "", "", "", "", "", "","", "", "", "", "", mass, c1, c2, c3, c4, c5, c6, c7, c8, c9, c10, c15, c20, c30, c50, c100]
            let finalValue = value.toString()
            console.log(finalValue)
            download("file.csv", finalValue);
        }
    </script>
</head>
<body>
    <div class="max-size">
        <div id="mainBox">
            <div>
                <label> Electrode Mass <br>
                    <input id="mass" type="number" onChange="calculate()">
                </label>
                <br>
                <label> Anode Foil <br>
                    <select id="anodeFoil" onChange="calculate()">
                        <option value="Cu">Cu</option>
                        <option value="Al">Al</option>
                    </select>
                </label>
                <br>
                <label> Cathode Foil <br>
                    <select id="cathodeFoil" onChange="calculate()">

                        <option value="Al">Al</option>
                        <option value="Cu">Cu</option>
                    </select>
                </label>
                <br>
                <label> A/g <br>
                    <input  id="ampPerGram" value="0.025" onChange="calculate()">
                </label>
                <br>
                <label> Current (mA) <br>
                    <div id="result" onChange="calculate()">
                        ...
                    </div>
                </label>
                <br>
                <button id="copy" onclick="cc()">Copy</button>      
            </div>      
            <div>
                <div id="sub">
                    <div class="sub">
                        Cycle
                        <br>
                        <p>1</p>
                        <p>2</p>
                        <p>3</p>
                        <p>4</p>
                        <p>5</p>
                    </div>
                    <div class="sub">
                        Energy discharge (mWh)
                        <input type="number" id="1">
                        <input type="number" id="2">
                        <input type="number" id="3">
                        <input type="number" id="4">
                        <input type="number" id="5">
                    </div>
                    <div class="sub">
                        Cycle
                        <br>
                        <p>6</p>
                        <p>7</p>
                        <p>8</p>
                        <p>9</p>
                        <p>10</p>
                    </div>
                    <div class="sub">
                        Energy discharge (mWh)
                        <input type="number" id="6">
                        <input type="number" id="7">
                        <input type="number" id="8">
                        <input type="number" id="9">
                        <input type="number" id="10">
                    </div>
                    <div class="sub">
                        Cycle
                        <br>
                        <p>15</p>
                        <p>20</p>
                        <p>30</p>
                        <p>50</p>
                        <p>100</p>
                    </div>
                    <div class="sub">
                        Energy discharge (mWh)
                        <input type="number" id="15">
                        <input type="number" id="20">
                        <input type="number" id="30">
                        <input type="number" id="50">
                        <input type="number" id="100">
                    </div>
                </div>
                <div style="display: inline; margin-top: 1vw;">  
                    <button onclick="csv()">Download CSV</button>    
                </div>
            </div>
        </div>
    </div>
</body>